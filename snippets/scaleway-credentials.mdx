Qovery needs API credentials to manage resources in your Scaleway account. We use a secure API key approach with granular permissions.

### Generate API Key

<Steps>
  <Step title="Access IAM Console">
    1. Log into [Scaleway Console](https://console.scaleway.com)
    2. Click your profile/organization name in the top-right
    3. Select **Identity and Access Management (IAM)**

    <Frame>
      <img src="/images/scaleway-credentials/iam-menu.png" alt="Scaleway IAM menu" />
    </Frame>
  </Step>

  <Step title="Create Application">
    1. Navigate to **Applications** tab
    2. Click **+ Create application**
    3. Name it: `qovery-manager` or similar
    4. Description: "Qovery cluster management"
    5. Click **Create application**

    <Tip>
    Applications help organize API keys by purpose. You can reuse this application for multiple clusters.
    </Tip>
  </Step>

  <Step title="Generate API Key">
    1. Click on your newly created application
    2. Go to **API keys** tab
    3. Click **+ Generate API key**
    4. Description: "Qovery cluster access"
    5. Select **Object Storage preferred Project** (your main project)
    6. Click **Generate API key**

    <Warning>
    **Save these credentials immediately!** The secret key is only shown once and cannot be retrieved later.
    </Warning>

    You'll see:
    - **Access key ID**: `SCWxxxxxxxxxxxxxxxxx`
    - **Secret access key**: `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`

    Copy both to a secure location.
  </Step>

  <Step title="Configure Permissions">
    1. Go to **Policies** tab in IAM
    2. Click **+ Create policy**
    3. Name it: `qovery-permissions`
    4. Click **Add rule** for each of these permission sets:

    **Required Permissions:**
    - ✅ **Containers** - Full access (for Kapsule management)
    - ✅ **Network Services** - Full access (for VPC, Load Balancers)
    - ✅ **Compute** - Full access (for instances)
    - ✅ **Storage** - Full access (for persistent volumes)
    - ✅ **VPC** - Full access (for networking)

    5. Under **Principal**, attach this policy to your application
    6. Click **Create policy**

    <Info>
    These permissions allow Qovery to fully manage your Kubernetes infrastructure, including creating instances, configuring networking, and managing storage.
    </Info>
  </Step>

  <Step title="Gather Required IDs">
    You'll need these identifiers:

    **Organization ID:**
    1. Go to **Organization Settings**
    2. Copy the **Organization ID** (format: `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`)

    **Project ID:**
    1. Go to your **Project Dashboard**
    2. Click **Project settings**
    3. Copy the **Project ID** (format: `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`)

    <Tip>
    Keep these IDs handy - you'll need them when configuring Qovery.
    </Tip>
  </Step>
</Steps>

### Add Credentials to Qovery

<Steps>
  <Step title="Start Cluster Creation">
    1. Go to [Qovery Console](https://console.qovery.com)
    2. Click **Clusters** in the left sidebar
    3. Click **Create Cluster**
    4. Select **Scaleway** as the cloud provider
  </Step>

  <Step title="Enter Credentials">
    Provide the information you gathered:
    - **Access Key ID**: Your Scaleway access key
    - **Secret Access Key**: Your Scaleway secret key
    - **Organization ID**: Your Scaleway organization ID
    - **Project ID**: Your Scaleway project ID

    <Frame>
      <img src="/images/scaleway-credentials/create-credentials.jpg" alt="Enter Scaleway credentials in Qovery Console" />
    </Frame>

    Click **Next** to validate the credentials.
  </Step>

  <Step title="Verify Connection">
    Qovery will test the credentials and verify it can access your Scaleway account.

    <Info>
    If validation fails, double-check your API key has all required permissions attached via the policy.
    </Info>
  </Step>
</Steps>

<AccordionGroup>
  <Accordion title="What permissions does Qovery need?">
    Qovery requires these Scaleway permissions to manage your infrastructure:
    - **Containers**: Create and manage Kapsule Kubernetes clusters
    - **Network Services**: Configure Load Balancers, DNS, and Public Gateways
    - **Compute**: Provision and manage instances for node pools
    - **Storage**: Create and manage Block Storage volumes for persistent data
    - **VPC**: Configure Private Networks, Security Groups, and network routing

    These permissions are applied via IAM policies attached to your API key's application.
  </Accordion>

  <Accordion title="Can I use a custom IAM policy?">
    Yes! You can create a custom IAM policy with more restrictive permissions. However, ensure it includes all the resource types needed for managing Kapsule, networking, compute, and storage. Missing permissions may cause deployment failures.
  </Accordion>

  <Accordion title="How do I rotate credentials?">
    To rotate Scaleway credentials:
    1. In Scaleway Console, go to **IAM** → **Applications**
    2. Find your application (e.g., `qovery-manager`)
    3. Go to **API keys** tab
    4. Click **+ Generate API key** to create a new key
    5. Update credentials in Qovery Console
    6. Wait 24 hours to ensure all systems use new keys
    7. Delete the old API key in Scaleway Console
    8. Set a reminder to rotate again in 90 days
  </Accordion>

  <Accordion title="What are the credential formats?">
    - **Access Key ID**: Starts with `SCW` followed by alphanumeric characters
    - **Secret Access Key**: UUID format (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)
    - **Organization ID**: UUID format
    - **Project ID**: UUID format

    All UUIDs use the standard 8-4-4-4-12 hexadecimal format.
  </Accordion>
</AccordionGroup>
